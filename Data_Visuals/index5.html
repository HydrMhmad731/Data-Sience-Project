<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gauge Chart - Articles by Language</title>
    <!-- Styles -->
    <style>
        #chartdiv {
            width: 100%;
            height: 500px;
        }
    </style>
    <!-- Resources -->
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/radar.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
</head>
<body>

<!-- HTML -->
<div id="chartdiv"></div>

<!-- Chart code -->
<script>
am5.ready(function() {

    // Create root element
    var root = am5.Root.new("chartdiv");

    // Set themes
    root.setThemes([
        am5themes_Animated.new(root)
    ]);

    // Create chart
    var chart = root.container.children.push(am5radar.RadarChart.new(root, {
        panX: false,
        panY: false,
        startAngle: 160,
        endAngle: 380
    }));

    // Create axis and its renderer
    var axisRenderer = am5radar.AxisRendererCircular.new(root, {
        innerRadius: -40
    });

    axisRenderer.grid.template.setAll({
        stroke: root.interfaceColors.get("background"),
        visible: true,
        strokeOpacity: 0.8
    });

    var xAxis = chart.xAxes.push(am5xy.ValueAxis.new(root, {
        maxDeviation: 0,
        min: 0,
        max: 100,
        strictMinMax: true,
        renderer: axisRenderer
    }));

    // Add clock hand (needle)
    var axisDataItem = xAxis.makeDataItem({});
    var clockHand = am5radar.ClockHand.new(root, {
        pinRadius: am5.percent(20),
        radius: am5.percent(100),
        bottomWidth: 40
    });

    var bullet = axisDataItem.set("bullet", am5xy.AxisBullet.new(root, {
        sprite: clockHand
    }));

    xAxis.createAxisRange(axisDataItem);

    var label = chart.radarContainer.children.push(am5.Label.new(root, {
        fill: am5.color(0xffffff),
        centerX: am5.percent(50),
        textAlign: "center",
        centerY: am5.percent(50),
        fontSize: "2em"
    }));

    // Sample data for languages
    var languagesData = [
        { title: "English", color: "#0f9747", value: 50 },
        { title: "Arabic", color: "#f3eb0c", value: 30 },  // Arabic is in between
        { title: "Spanish", color: "#f04922", value: 20 }
    ];

    // Create axis ranges bands for each language
    languagesData.forEach(function(data) {
        var axisRange = xAxis.createAxisRange(xAxis.makeDataItem({}));
        axisRange.setAll({
            value: data.value - 5,
            endValue: data.value + 5
        });

        axisRange.get("axisFill").setAll({
            visible: true,
            fill: am5.color(data.color),
            fillOpacity: 0.8
        });

        axisRange.get("label").setAll({
            text: data.title,
            inside: true,
            radius: 15,
            fontSize: "0.9em",
            fill: root.interfaceColors.get("background")
        });
    });

    // Set needle to point to Arabic
    axisDataItem.set("value", languagesData[1].value);  // Set to Arabic value
    label.set("text", "Total: " + 150);  // Replace 150 with the actual total count of articles

    clockHand.pin.animate({ key: "fill", to: am5.color(languagesData[1].color), duration: 500, easing: am5.ease.out(am5.ease.cubic) });
    clockHand.hand.animate({ key: "fill", to: am5.color(languagesData[1].color), duration: 500, easing: am5.ease.out(am5.ease.cubic) });

    // Make stuff animate on load
    chart.appear(1000, 100);

}); // end am5.ready()
</script>

</body>
</html>
